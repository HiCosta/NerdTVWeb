CREATE DATABASE NERDTVWEB;

USE NERDTVWEB;


CREATE TABLE TB_CLIENTES(
       CODIGO INT PRIMARY KEY,
       TIPOCLIENTE VARCHAR(2) NOT NULL,
       NOMECOMPLETO VARCHAR(30) NOT NULL,
       CPFCNPJ VARCHAR(20) NOT NULL,
       SEXO VARCHAR(1),
       DTNASCIMENTO DATE NOT NULL,
       ENDERECO VARCHAR(50) NOT NULL,
       EMAIL VARCHAR(50) NOT NULL,
       CELULAR VARCHAR(20) NOT NULL,
       DATAHORACADASTRO TIMESTAMP
);

CREATE TABLE TB_USUARIOS(
       CODIGO INT PRIMARY KEY,
       CODIGOCLIENTE INT,
       NOMEUSUARIO VARCHAR(20) NOT NULL,
       EMAIL VARCHAR(50) UNIQUE,
       SENHA VARCHAR(20),
       STATUSUSUARIO VARCHAR(10) NOT NULL
);

CREATE TABLE TB_PLANOS(
       CODIGOPLANO CHAR(2) PRIMARY KEY,
       TITULOPLANO VARCHAR(20),
       PRECOPLANO DECIMAL(10, 2) NOT NULL,
       PARCELAS INT,
       DTINICIO DATE NOT NULL,
       DTTERMINO DATE
);

CREATE TABLE TB_PARCELASMENSALIDADE(
       CODIGOMENSALIDADE INT PRIMARY KEY,
       CODIGOPLANO CHAR(2),
       CODIGOCLIENTE INT,
       VALORBRUTO DECIMAL(10, 2) NOT NULL,
       DESCONTO DECIMAL(5, 2),
       VALORDESCONTO DECIMAL(10, 2),
       VALORLIQUIDO DECIMAL(10, 2) NOT NULL,
       DTVENCIMENTO DATE NOT NULL,
       PARCELA INT,
       DATAPAGAMENTO DATE NOT NULL,
       VALORPAGO DECIMAL(10, 2) NOT NULL,
       STATUSMENSALIDADE VARCHAR(20)
);

CREATE TABLE TB_RECIBOBANCARIO(
       CODIGOREGISTRO INT PRIMARY KEY,
       CODIGOMENSALIDADE INT,
       DTRECEBIMENTO DATE NOT NULL,
       VALORRECEBIDO DECIMAL(10, 2) NOT NULL
);

ALTER TABLE TB_USUARIOS
      ADD FOREIGN KEY (CODIGOCLIENTE) REFERENCES TB_CLIENTES(CODIGO);
      
ALTER TABLE TB_PARCELASMENSALIDADE
      ADD FOREIGN KEY (CODIGOPLANO) REFERENCES TB_PLANOS(CODIGOPLANO);
      
ALTER TABLE TB_PARCELASMENSALIDADE
      ADD FOREIGN KEY (CODIGOCLIENTE) REFERENCES TB_CLIENTES(CODIGO);
      
ALTER TABLE TB_RECIBOBANCARIO
      ADD FOREIGN KEY (CODIGOMENSALIDADE) REFERENCES TB_PARCELASMENSALIDADE(CODIGOMENSALIDADE); 


--ALIMENTANDO TABELAS
INSERT INTO TB_CLIENTES (CODIGO, TIPOCLIENTE, NOMECOMPLETO, CPFCNPJ, SEXO, DTNASCIMENTO, ENDERECO, EMAIL, CELULAR)
VALUES
(1, 'PF', 'João Silva', '123.456.789-01', 'M', '1980-05-15', 'Rua A, 123', 'joao@email.com', '(11) 1234-5678'),
(2, 'PJ', 'Empresa ABC', '12.345.678/0001-23', NULL, '1990-02-20', 'Avenida B, 456', 'empresa@email.com', '(11) 9876-5432'),
(3, 'PF', 'Maria Santos', '987.654.321-02', 'F', '1975-08-10', 'Rua C, 789', 'maria@email.com', '(11) 5555-1234'),
(4, 'PF', 'José Pereira', '111.222.333-45', 'M', '1988-11-30', 'Avenida D, 101', 'jose@email.com', '(11) 7777-8888'),
(5, 'PJ', 'Empresa XYZ', '98.765.432/0001-99', NULL, '2000-04-05', 'Rua E, 222', 'empresa2@email.com', '(11) 3333-9999'),
(6, 'PF', 'Ana Souza', '555.444.333-66', 'F', '1999-12-25', 'Avenida F, 333', 'ana@email.com', '(11) 2222-1111'),
(7, 'PF', 'Pedro Santos', '777.888.999-11', 'M', '1985-06-20', 'Rua G, 777', 'pedro@email.com', '(11) 1234-5678'),
(8, 'PJ', 'Empresa 123', '22.333.444/0001-22', NULL, '1990-03-15', 'Avenida H, 444', 'empresa3@email.com', '(11) 4321-8765'),
(9, 'PF', 'Clara Lima', '222.111.333-44', 'F', '1970-07-03', 'Rua I, 555', 'clara@email.com', '(11) 6543-2109'),
(10, 'PF', 'Rafaela Ferreira', '333.444.555-66', 'F', '1982-09-10', 'Avenida J, 666', 'rafaela@email.com', '(11) 5555-2222'),
(11, 'PJ', 'Empresa ABCD', '11.222.333/0001-11', NULL, '2005-01-12', 'Rua K, 111', 'empresa4@email.com', '(11) 9999-7777'),
(12, 'PF', 'Mariana Costa', '666.555.444-33', 'F', '1998-11-14', 'Avenida L, 999', 'mariana@email.com', '(11) 1234-5678'),
(13, 'PF', 'Leonardo Alves', '888.777.666-22', 'M', '1978-04-28', 'Rua M, 777', 'leonardo@email.com', '(11) 1234-5678'),
(14, 'PJ', 'Empresa EFG', '44.555.666/0001-44', NULL, '2010-06-05', 'Avenida N, 555', 'empresa5@email.com', '(11) 9876-5432'),
(15, 'PF', 'Luana Santos', '111.222.333-44', 'F', '1995-10-15', 'Rua O, 222', 'luana@email.com', '(11) 5555-1234'),
(16, 'PF', 'Lucas Rodrigues', '999.888.777-66', 'M', '1989-02-28', 'Avenida P, 101', 'lucas@email.com', '(11) 7777-8888'),
(17, 'PJ', 'Empresa HIJ', '12.345.678/0001-12', NULL, '2015-07-20', 'Rua Q, 222', 'empresa6@email.com', '(11) 3333-9999');

--ALIMENTANDO TABELA USUARIOS
-- Cliente 1
INSERT INTO TB_USUARIOS (CODIGO, CODIGOCLIENTE, NOMEUSUARIO, EMAIL, SENHA, STATUSUSUARIO)
VALUES (1, 1, 'joao123', 'joao@email.com', 'senha123', 'Ativo');

-- Cliente 2
INSERT INTO TB_USUARIOS (CODIGO, CODIGOCLIENTE, NOMEUSUARIO, EMAIL, SENHA, STATUSUSUARIO)
VALUES (2, 2, 'empresaabc', 'empresa@email.com', 'senha456', 'Ativo');

-- Cliente 3
INSERT INTO TB_USUARIOS (CODIGO, CODIGOCLIENTE, NOMEUSUARIO, EMAIL, SENHA, STATUSUSUARIO)
VALUES (3, 3, 'maria84', 'maria@email.com', 'senha789', 'Inativo');

-- Cliente 4
INSERT INTO TB_USUARIOS (CODIGO, CODIGOCLIENTE, NOMEUSUARIO, EMAIL, SENHA, STATUSUSUARIO)
VALUES (4, 4, 'jose1988', 'jose@email.com', 'senha1011', 'Ativo');

-- Cliente 5
INSERT INTO TB_USUARIOS (CODIGO, CODIGOCLIENTE, NOMEUSUARIO, EMAIL, SENHA, STATUSUSUARIO)
VALUES (5, 5, 'empresaxyz', 'empresa2@email.com', 'senha1213', 'Ativo');

-- Cliente 6
INSERT INTO TB_USUARIOS (CODIGO, CODIGOCLIENTE, NOMEUSUARIO, EMAIL, SENHA, STATUSUSUARIO)
VALUES (6, 6, 'ana99', 'ana@email.com', 'senha1415', 'Inativo');

-- Cliente 7
INSERT INTO TB_USUARIOS (CODIGO, CODIGOCLIENTE, NOMEUSUARIO, EMAIL, SENHA, STATUSUSUARIO)
VALUES (7, 7, 'pedrosantos', 'pedro@email.com', 'senha1617', 'Ativo');

-- Cliente 8
INSERT INTO TB_USUARIOS (CODIGO, CODIGOCLIENTE, NOMEUSUARIO, EMAIL, SENHA, STATUSUSUARIO)
VALUES (8, 8, 'empresa123', 'empresa3@email.com', 'senha1819', 'Ativo');

-- Cliente 9
INSERT INTO TB_USUARIOS (CODIGO, CODIGOCLIENTE, NOMEUSUARIO, EMAIL, SENHA, STATUSUSUARIO)
VALUES (9, 9, 'clara70', 'clara@email.com', 'senha2021', 'Inativo');

-- Cliente 10
INSERT INTO TB_USUARIOS (CODIGO, CODIGOCLIENTE, NOMEUSUARIO, EMAIL, SENHA, STATUSUSUARIO)
VALUES (10, 10, 'rafaela', 'rafaela@email.com', 'senha2223', 'Ativo');

--ALIMENTANDO TABELA PLANOS
INSERT INTO TB_PLANOS (CODIGOPLANO, TITULOPLANO, PRECOPLANO, PARCELAS, DTINICIO, DTTERMINO)
VALUES ('P1', 'Plano Básico', 29.99, 12, '2023-01-01', '2023-12-31'),
('P2', 'Plano Standard', 49.99, 24, '2023-01-01', '2023-12-31'),
('P3', 'Plano Premium', 79.99, 36, '2023-01-01', '2023-12-31'),
('P4', 'Plano Empresarial', 99.99, 48, '2023-01-01', '2023-12-31'),
('P5', 'Plano Personalizado', 69.99, 12, '2023-01-01', '2023-12-31');


--ALIMENTANDO TABELA PARCELASMENSALIDADE
INSERT INTO TB_PARCELASMENSALIDADE (CODIGOMENSALIDADE, CODIGOPLANO, CODIGOCLIENTE, VALORBRUTO, DESCONTO, VALORDESCONTO, VALORLIQUIDO, DTVENCIMENTO, PARCELA, DATAPAGAMENTO, VALORPAGO, STATUSMENSALIDADE)
VALUES (1, 'P1', 1, 29.99, 0.00, 0.00, 29.99, '2023-01-15', 1, '2023-01-15', 29.99, 'Pago'),
(2, 'P2', 2, 49.99, 0.00, 0.00, 49.99, '2023-01-15', 1, '2023-01-15', 49.99, 'Pago'),
(3, 'P1', 1, 29.99, 0.00, 0.00, 29.99, '2023-02-15', 2, '2023-02-15', 29.99, 'Pago'),
(4, 'P2', 2, 49.99, 0.00, 0.00, 49.99, '2023-02-15', 2, '2023-02-15', 49.99, 'Pago');

--ALIMENTANDO TABELA RECIBOBANCARIO
INSERT INTO TB_RECIBOBANCARIO (CODIGOREGISTRO, CODIGOMENSALIDADE, DTRECEBIMENTO, VALORRECEBIDO)
VALUES (1, 1, '2023-01-15', 29.99),
(2, 2, '2023-01-15', 49.99),
(3, 3, '2023-02-15', 29.99),
(4, 4, '2023-02-15', 49.99);
